<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Create User</title>
    <link rel="stylesheet" href="../css/styleHome.css" type="text/css" />
    <link rel="stylesheet" href="../css/users.css" type="text/css" />
    <link rel="stylesheet" href="../css/form.css" type="text/css" />
</head>
<body>
<div >
    <div class="navbar">

        <marquee style='background:#000000; margin: 0; padding: 0; opacity:1.0;'  >
            <img height='70' width='150' src='../img/emag.png'>

        </marquee>


        <ul>
            <li> <a href="/login/admin">ADMIN</a></li>
            <li > <a href="/login/client">CUSTOMER</a></li>
            <li > <a href="/userCreate">REGISTER</a></li>
        </ul>

    </div>
<h1 th:align="center" >Create User</h1>
<form id="userForm"  method="POST" th:action="@{/userCreate}" th:modelAttribute="userDTO" >

    <label for="lastName">Last Name:</label>
    <input type="text" id="lastName" name="lastName" required pattern="[A-Za-z]+" title="Last name must contain only letters"><br>

    <label for="firstName">First Name:</label>
    <input type="text" id="firstName" name="firstName" required pattern="[A-Za-z]+" title="First name must contain only letters"><br>

    <label for="username">Username:</label>
    <input type="text" id="username" name="username" required><br>

    <label for="password">Password:</label>
    <input type="password" id="password" name="password" pattern=".{8,}" required title="Password must be at least 8 characters long"><br>

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required><br>

    <label for="address">Address:</label>
    <input type="text" id="address" name="address" required><br>

    <label for="dateOfBirth">Date of Birth:</label>
    <input type="date" id="dateOfBirth" name="dateOfBirth" required><br>
    <input type="hidden" name="isAdmin" value="false">
    <label for="isAdmin">Is Admin:</label><br>
    <input type="checkbox" id="isAdmin" name="isAdmin" value="true"><br>

    <input type="submit" value="Create User">
</form>
<!-- Shopping cart creation form -->
<section id="userDataForm" class="container_id" th:if="${userId}">
    <h2>Create Shopping Cart</h2>
    <form id="shoppingCartForm" method="POST" th:action="@{/shopping-carts/insertShoppingCart}" th:modelAttribute="shoppingCartDTO">
        <input type="hidden" id="userId" name="userId" th:value="${userId}">
        <!-- Assuming user.id contains the ID of the created user -->
        <input type="hidden" id="total" name="total" th:value="0">

        <!-- Your shopping cart creation form fields -->
        <input type="submit" value="Create Cart">
    </form>
</section>
</div>
<script th:inline="javascript">
    // Retrieve the user ID from the URL
    var userId = /*[[${userId}]]*/ '';

    // Check if the user ID is not empty
    if (userId !== '') {
        // Set the user ID value in the hidden input field of the shopping cart form
        document.getElementById("userForm").value = userId;
        // Automatically submit the shopping cart form
        document.getElementById("shoppingCartForm").submit();
    }


</script>


</body>
</html>
